Almagro shocks Nadal at Barcelona Open